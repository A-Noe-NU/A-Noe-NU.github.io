<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <style>

      text {
        font: 10px sans-serif;
        text-anchor: middle;
      }
      
      .node--hover circle {
        stroke: #000;
        stroke-width: 1.2px;
      }
      
      </style>
    <script src="https://d3js.org/d3.v4.min.js"></script>
    <title>Africa SCA Data</title>
    <link rel="stylesheet" href="./styles.css" />
  </head>
  <body>
    <div id="banner">
      <p><p1 style=font-size:40px>Africa</p>
      <h1><h1 style=font-size:60px>Social Conflict Analysis Database</h1>
      <p1 style=font-size:40px>1990-2017</p1>
      <br>
      <br>
      <br>
      <br>
      <br>
      <br>
      <br>
      <br>
      <br>
      <p1 style=font-size:18px> <p1 style=font-style:italic>The Social Conflict Analysis (SCA) Database is maintained by the Robert Strauss Center for International Security 
        <br>and Law at the University of Texas. It includes protests, riots, strikes, inter-communal conflict, government violence 
        <br>against civilians, and other forms of social conflict not systematically tracked in other conflict datasets from 1990-2017.</p> 
        <br>
        <br>
        <br>
        <p1 style=font-size:18px> <p1 style=font-weight:bold>Explore the data below.</p> 
      </div>

      <div>

      </div>
      <br>
      <br>
      <br>
      <p><p1 style=font-size:24px> <p1 style=font-style:italic>Select a country to view data.</p>
      <div id="scatterplot">
    


      </div>

<div class="row">
  <div class="section"></div>
  <div class="section"></div>
  <div class="section"></div>
</div>




      <div id="tooltip">
          <h2 id="title"></h2>
          Value: <span id="value"></span>
      </div>

      <script src="./banner.js"></script>
      <script src="./chart1.js"></script>
      <script>

              // set the dimensions and margins of the graph
              var margin = {top: 10, right: 30, bottom: 30, left: 60},
            width = 460 - margin.left - margin.right,
            height = 400 - margin.top - margin.bottom;
      
              // append the svg object to the body of the page
        var svg = d3.select("#scatterplot")
                    .append("svg")
                    .attr("width", width + margin.left + margin.right)
                    .attr("height", height + margin.top + margin.bottom)
                    .append("g")
                    .attr("transform",
                          "translate(" + margin.left + "," + margin.top + ")");

        d3.csv("scad_data.csv", function(error, data) 
        {
        if (error) {
            console.log(error);
        }
        else {
            console.log("Africa SCA Data");
        }

        data.forEach(function(d) {
            d.ndeath = parseFloat(d.ndeath);
                    });

        var data_by_country = d3.nest()
            .key(function(d) {return d.countryname;})
            .rollup(function(v) {
              return {
                cnt: v.length,
                ndeathSum: d3.sum(v, function(d) {return d.ndeath; }),
                values: v
              };
            })
            .entries(data)
            .map(function(d) {
              return {
                Country_Name: d.key,
                Sum_of_nDeath: d.value.ndeathSum,
                count: d.value.cnt,
                values: d.value.values
                };

                
              }
              
              
              );

                console.log("Data by Country", data_by_country);
                ;
              
          // Add X axis
          var x = d3.scaleLinear()
            .domain([0, 2600])
            .range([ 0, width ]);
          svg.append("g")
            .attr("transform", "translate(0," + height + ")")
            .call(d3.axisBottom(x));

          // Add Y axis
          var y = d3.scaleLinear()
            .domain([0, 50000])
            .range([ height, 0]);
          svg.append("g")
            .call(d3.axisLeft(y));

          // Add dots
          svg.append('g')
            .selectAll("dot")
            .data(data)
            .enter()
            .append("circle")
              .attr("cx", function (d) { return d.value.cnt})
              .attr("cy", function (d) { return d.value.ndeathSum } )
              .attr("r", 1.5)
              .style("fill", "#69b3a2")


              
      
      });
        ;


      </script>
    </body>
  </body>
</html>